syntax = "proto3";

package opendut.model.cluster;

import "opendut/model/util/uuid.proto";
import "opendut/model/util/net.proto";
import "opendut/model/peer/peer.proto";
import "opendut/model/topology/device.proto";

message ClusterId {
  opendut.model.util.Uuid uuid = 1;
}

message ClusterName {
  string value = 1;
}

message ClusterDescriptor {
  ClusterId id = 1;
  ClusterName name = 2;
  opendut.model.peer.PeerId leader = 3;
  repeated opendut.model.topology.DeviceId devices = 4;
}

message ClusterDeployment {
  ClusterId id = 1;
}

message ClusterState {
  oneof inner {
    ClusterStateUndeployed undeployed = 1;
    ClusterStateDeploying deploying = 2;
    ClusterStateDeployed deployed = 3;
  }
}

message ClusterStateUndeployed {}

message ClusterStateDeploying {}

message ClusterStateDeployed {
  oneof inner {
    ClusterStateDeployedUnhealthy unhealthy = 1;
    ClusterStateDeployedHealthy healthy = 2;
  }
}

message ClusterStateDeployedUnhealthy {}

message ClusterStateDeployedHealthy {}
